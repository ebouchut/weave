<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>weave â€” Entity-Level Semantic Merge for Git</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <nav>
      <a class="logo" href="index.html">weave</a>
      <div class="links">
        <a href="index.html" class="active">Home</a>
        <a href="docs.html">Docs</a>
        <a href="learn.html">Learn</a>
        <a href="changelog.html">Changelog</a>
        <a href="https://github.com/Ataraxy-Labs/weave">GitHub</a>
        <a href="llms.txt">llms.txt</a>
      </div>
    </nav>

    <!-- Header -->
    <div style="padding: 48px 0 32px; text-align: center;">
      <h1 style="font-size: 36px; font-weight: 700; color: var(--accent); letter-spacing: -1.5px; margin-bottom: 12px;">Merge without conflicts.</h1>
      <p style="font-size: 14px; color: var(--dim); margin-bottom: 24px; line-height: 1.7; max-width: 540px; margin-left: auto; margin-right: auto;">
        Entity-level semantic merge driver for Git. Understands functions, classes, and properties &mdash; so two agents editing different functions in the same file merge cleanly.
      </p>
      <div class="install-box" onclick="copyCmd(this, 'brew install ataraxy-labs/tap/weave')" style="display: inline-block; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 10px 20px; font-size: 14px; color: var(--fg); cursor: pointer; position: relative;">
        <span class="copied" style="position: absolute; top: -28px; left: 50%; transform: translateX(-50%); font-size: 12px; color: var(--green); opacity: 0; transition: opacity 0.2s;">copied</span>
        <span style="color: var(--dim);">$</span> brew install ataraxy-labs/tap/weave
      </div>
    </div>

    <!-- Terminal demo: the problem -->
    <div class="terminal">
      <div class="terminal-bar">
        <div class="terminal-dot"></div>
        <div class="terminal-dot"></div>
        <div class="terminal-dot"></div>
        <div class="terminal-title">the problem</div>
      </div>
      <div class="terminal-body">
<pre><span class="d"># Two agents edit different functions in the same file</span>
<span class="d"># Agent 1 modifies processData()</span>
<span class="d"># Agent 2 modifies validateInput()</span>

<span class="cmd">$ git merge feature-b</span>
<span class="r">CONFLICT (content): Merge conflict in src/lib.ts</span>
<span class="r">Automatic merge failed; fix conflicts and then commit.</span>

<span class="d"># Git sees overlapping line ranges &mdash; false conflict.</span>
<span class="d"># The functions don't actually overlap. Git doesn't know that.</span></pre>
      </div>
    </div>

    <div class="terminal">
      <div class="terminal-bar">
        <div class="terminal-dot"></div>
        <div class="terminal-dot"></div>
        <div class="terminal-dot"></div>
        <div class="terminal-title">the solution</div>
      </div>
      <div class="terminal-body">
<pre><span class="cmd">$ weave-cli setup</span>
<span class="g">&#10003;</span> Merge driver configured for *.ts, *.js, *.py, *.go, *.rs, ...

<span class="cmd">$ git merge feature-b</span>
<span class="d">weave [src/lib.ts]: 2 entities matched, 2 modified, 0 conflicts</span>
<span class="g">Merge made by the 'ort' strategy.</span>

<span class="d"># weave understands functions. Different functions = no conflict.</span></pre>
      </div>
    </div>

    <!-- Three Phases -->
    <section>
      <h2>Three phases</h2>
      <p class="section-desc">weave has three layers, each building on the last. Use just the merge driver, or add coordination for multi-agent workflows.</p>

      <div class="phase-cards">
        <div class="phase-card" style="border-color: var(--green);">
          <div class="tag" style="background: #4ade8022; color: var(--green);">PHASE 1</div>
          <h3>Merge Driver</h3>
          <p>Replaces git's line-level merge with entity-level merge. Parses code with tree-sitter, merges by function/class instead of by line.</p>
        </div>
        <div class="phase-card" style="border-color: var(--purple);">
          <div class="tag" style="background: #a78bfa22; color: var(--purple);">PHASE 2</div>
          <h3>CRDT State</h3>
          <p>Persistent "who's editing what" state. Agents claim entities before editing, detect conflicts before they happen.</p>
        </div>
        <div class="phase-card" style="border-color: var(--cyan);">
          <div class="tag" style="background: #22d3ee22; color: var(--cyan);">PHASE 3</div>
          <h3>MCP Server</h3>
          <p>15 tools exposed via Model Context Protocol. Claude and other AI agents call them directly to coordinate work.</p>
        </div>
      </div>
    </section>

    <!-- weave vs git -->
    <section>
      <h2>weave vs git merge</h2>
      <p class="section-desc">git merges lines. mergiraf merges tree nodes. weave merges entities. <a href="learn.html" style="color:var(--cyan)">Read the full deep dive &rarr;</a></p>
      <div class="comparison-table">
        <table>
          <thead>
            <tr>
              <th>Scenario</th>
              <th>git merge</th>
              <th>mergiraf</th>
              <th>weave merge</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Two agents edit different functions</td>
              <td class="lose">CONFLICT (adjacent lines)</td>
              <td class="win">auto-resolved</td>
              <td class="win">auto-resolved</td>
            </tr>
            <tr>
              <td>One adds function, one modifies another</td>
              <td class="lose">often conflicts</td>
              <td class="win">auto-resolved</td>
              <td class="win">auto-resolved</td>
            </tr>
            <tr>
              <td>Both modify the same function identically</td>
              <td class="lose">CONFLICT</td>
              <td class="win">auto-resolved</td>
              <td class="win">detected as identical, uses either</td>
            </tr>
            <tr>
              <td>Both modify the same function differently</td>
              <td class="lose">CONFLICT</td>
              <td class="lose">CONFLICT</td>
              <td style="color:var(--yellow)">attempts 3-way merge on entity body</td>
            </tr>
            <tr>
              <td>One deletes, one modifies</td>
              <td class="lose">silent data loss possible</td>
              <td style="color:var(--yellow)">depends on context</td>
              <td class="win">modify/delete conflict reported</td>
            </tr>
            <tr>
              <td>Both add functions at same position</td>
              <td class="lose">CONFLICT</td>
              <td class="lose">CONFLICT</td>
              <td class="win">auto-resolved (unordered entities)</td>
            </tr>
            <tr>
              <td>Python: both add decorators to function</td>
              <td class="lose">CONFLICT</td>
              <td class="lose">CONFLICT</td>
              <td class="win">auto-resolved (decorator bundling)</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Benchmark Results -->
    <section>
      <h2>Benchmark results</h2>
      <p class="section-desc">Run <code style="background:var(--surface);padding:2px 6px;border-radius:3px;font-size:12px;">weave bench</code> to reproduce. 31 merge scenarios across 7 languages, release build on Apple Silicon.</p>
      <div class="comparison-table">
        <table>
          <thead>
            <tr>
              <th>Scenario</th>
              <th>weave</th>
              <th>mergiraf</th>
              <th>git</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Different functions modified</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Different class methods modified</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Both add different imports (TS)</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Class: different methods among 4</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>One adds, other modifies</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Adjacent function changes</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Python: different class methods</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Python: adjacent methods (4-method class)</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Both add exports at end of file</td><td class="win">clean</td><td class="lose">CONFLICT</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Reformat vs modify (whitespace-aware)</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Both add functions at end of file</td><td class="win">clean</td><td class="lose">CONFLICT</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Both add methods to class at end</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Rust: both add different use statements</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Python: both add different imports</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Class: modify method + add new</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Both add functions between existing</td><td class="win">clean</td><td class="lose">CONFLICT</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Python: both add different decorators</td><td class="win">clean</td><td class="lose">CONFLICT</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Decorator + body change</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>TS: class method decorators</td><td class="win">clean</td><td class="lose">CONFLICT</td><td class="lose">CONFLICT</td></tr>
            <tr><td>TS: interface field additions</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Rust: enum variant additions</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Java: different methods in same class</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Java: both add annotations</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>C: different functions modified</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>TS: method reorder + modification</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Python: both add class methods</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>Rust: both add impl methods</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
            <tr><td>TS: enum modify + add variant</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>TS: add JSDoc + modify body</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Rust: both add doc comments to different fns</td><td class="win">clean</td><td class="win">clean</td><td class="win">clean</td></tr>
            <tr><td>Go: both add different functions</td><td class="win">clean</td><td class="win">clean</td><td class="lose">CONFLICT</td></tr>
          </tbody>
        </table>
      </div>
      <p style="font-size:13px;color:var(--dim);margin-top:16px;line-height:1.7;">
        <strong style="color:var(--accent)">weave: 31/31 clean (100%)</strong> vs <strong style="color:var(--dim)">mergiraf: 26/31 (83%)</strong> vs <strong style="color:var(--dim)">git: 15/31 (48%)</strong>.
        Full benchmark suite runs in <strong style="color:var(--green)">11ms</strong>. Individual merges take 65-374&micro;s. Entity extraction powered by <a href="https://github.com/Ataraxy-Labs/sem" style="color:var(--green)">sem-core</a> with xxHash64 structural hashing and parallel tree-sitter parsing.
      </p>
    </section>

    <!-- Supported Languages -->
    <section>
      <h2>Supported languages</h2>
      <p class="section-desc">Entity extraction powered by <a href="https://github.com/Ataraxy-Labs/sem" style="color:var(--green)">sem-core</a> and tree-sitter.</p>
      <table>
        <thead>
          <tr><th>Language</th><th>Extensions</th><th>Entities</th></tr>
        </thead>
        <tbody>
          <tr><td>TypeScript</td><td>.ts .tsx</td><td>functions, classes, interfaces, types, enums</td></tr>
          <tr><td>JavaScript</td><td>.js .jsx .mjs .cjs</td><td>functions, classes, variables</td></tr>
          <tr><td>Python</td><td>.py</td><td>functions, classes, decorators</td></tr>
          <tr><td>Go</td><td>.go</td><td>functions, methods, types</td></tr>
          <tr><td>Rust</td><td>.rs</td><td>functions, structs, enums, impls, traits</td></tr>
          <tr><td>Java</td><td>.java</td><td>classes, methods, interfaces, enums, fields</td></tr>
          <tr><td>C</td><td>.c .h</td><td>functions, structs, enums, unions, typedefs</td></tr>
          <tr><td>C++</td><td>.cpp .cc .cxx .hpp .hh .hxx</td><td>functions, classes, structs, enums, namespaces, templates</td></tr>
          <tr><td>Ruby</td><td>.rb</td><td>methods, classes, modules</td></tr>
          <tr><td>C#</td><td>.cs</td><td>methods, classes, interfaces, enums, structs, namespaces</td></tr>
          <tr><td>PHP</td><td>.php</td><td>functions, classes, methods, interfaces, traits, enums, namespaces</td></tr>
          <tr><td>Fortran</td><td>.f90 .f95 .f03 .f08 .f .for</td><td>functions, subroutines, modules, programs, interfaces</td></tr>
          <tr><td>JSON</td><td>.json</td><td>properties, objects</td></tr>
          <tr><td>YAML</td><td>.yml .yaml</td><td>sections, properties</td></tr>
          <tr><td>TOML</td><td>.toml</td><td>sections, properties</td></tr>
          <tr><td>CSV</td><td>.csv .tsv</td><td>rows</td></tr>
          <tr><td>Markdown</td><td>.md .mdx</td><td>heading-based sections</td></tr>
        </tbody>
      </table>
    </section>

    <!-- Quick Start -->
    <section>
      <h2>Quick start</h2>
      <p class="section-desc">Get weave running in your repo in 30 seconds.</p>

      <div class="terminal">
        <div class="terminal-bar">
          <div class="terminal-dot"></div>
          <div class="terminal-dot"></div>
          <div class="terminal-dot"></div>
          <div class="terminal-title">~/my-project</div>
        </div>
        <div class="terminal-body">
<pre><span class="d"># Install</span>
<span class="cmd">$ cargo install --git https://github.com/Ataraxy-Labs/weave weave-cli</span>
<span class="cmd">$ cargo install --git https://github.com/Ataraxy-Labs/weave weave-driver</span>

<span class="d"># Configure your repo</span>
<span class="cmd">$ cd my-project</span>
<span class="cmd">$ weave-cli setup</span>
<span class="g">&#10003;</span> Created .gitattributes with weave merge driver rules
<span class="g">&#10003;</span> Configured git merge driver 'weave'

<span class="d"># Preview a merge before doing it</span>
<span class="cmd">$ weave-cli preview feature-branch</span>
  src/auth.ts &mdash; <span class="g">auto-resolved</span>
    2 entities matched, 2 modified, 0 conflicts
  src/config.json &mdash; <span class="g">auto-resolved</span>
    1 entity matched, 1 modified, 0 conflicts

<span class="g">&#10003;</span> Merge would be clean (2 file(s) auto-resolved by weave)

<span class="d"># Now git merge uses weave automatically</span>
<span class="cmd">$ git merge feature-branch</span>
<span class="g">Merge made by the 'ort' strategy.</span></pre>
        </div>
      </div>

      <h3 style="font-size: 16px; color: var(--accent); margin: 32px 0 16px;">For AI agents (MCP)</h3>

      <div class="terminal">
        <div class="terminal-bar">
          <div class="terminal-dot"></div>
          <div class="terminal-dot"></div>
          <div class="terminal-dot"></div>
          <div class="terminal-title">Claude Code (CLI)</div>
        </div>
        <div class="terminal-body">
<pre><span class="d"># Install the MCP server binary</span>
<span class="cmd">$ cargo install --git https://github.com/Ataraxy-Labs/weave weave-mcp</span>

<span class="d"># Add to Claude Code (available in all projects)</span>
<span class="cmd">$ claude mcp add --scope user weave -- weave-mcp</span>

<span class="d"># Restart Claude Code, then verify with /mcp</span></pre>
        </div>
      </div>

      <div class="terminal">
        <div class="terminal-bar">
          <div class="terminal-dot"></div>
          <div class="terminal-dot"></div>
          <div class="terminal-dot"></div>
          <div class="terminal-title">Claude Desktop</div>
        </div>
        <div class="terminal-body">
<pre><span class="d"># Add to Claude Desktop config (~/.config/claude/claude_desktop_config.json)</span>
<span class="d">{</span>
  <span class="b">"mcpServers"</span>: <span class="d">{</span>
    <span class="b">"weave"</span>: <span class="d">{</span> <span class="b">"command"</span>: <span class="g">"weave-mcp"</span> <span class="d">}</span>
  <span class="d">}</span>
<span class="d">}</span></pre>
        </div>
      </div>
    </section>

    <footer>
      <p>Built by <a href="https://ataraxy-labs.com">Ataraxy Labs</a></p>
    </footer>
  </div>

  <script>
    function copyCmd(el, cmd) {
      navigator.clipboard.writeText(cmd);
      let copied = el.querySelector('.copied');
      if (copied) {
        copied.classList.add('show');
        setTimeout(() => copied.classList.remove('show'), 1500);
      }
    }
  </script>
</body>
</html>
